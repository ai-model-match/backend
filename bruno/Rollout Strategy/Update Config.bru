meta {
  name: Update Config
  type: http
  seq: 2
}

put {
  url: http://127.0.0.1:8001/api/v1/use-cases/{{firstUseCaseId}}/rollout-strategy
  body: json
  auth: bearer
}

auth:bearer {
  token: {{accessToken}}
}

body:json {
  {
    "configuration": {
      "warmup": {
        "interval_mins": 5,
        "interval_sess_req": null,
        "goals": [
          {
            "flow_id": "169f7c75-7911-4929-be65-700087ef06fd",
            "final_serve_pct": 40
          },
          {
            "flow_id": "3a99ca51-a292-4b52-b4dc-a839a99f1007",
            "final_serve_pct": 30
          },
          {
            "flow_id": "22b3ee72-257c-499d-be89-49b840187c06",
            "final_serve_pct": 30
          }
        ]
      },
      "escape": {
        "rules": [
          {
            "flow_id": "3a99ca51-a292-4b52-b4dc-a839a99f1007",
            "min_feedback": 5,
            "lower_score": 1.5,
            "rollback": [
              {
                "flow_id": "169f7c75-7911-4929-be65-700087ef06fd",
                "final_serve_pct": 100
              }
            ]
          },
          {
            "flow_id": "22b3ee72-257c-499d-be89-49b840187c06",
            "min_feedback": 5,
            "lower_score": 1.5,
            "rollback": [
              {
                "flow_id": "169f7c75-7911-4929-be65-700087ef06fd",
                "final_serve_pct": 100
              }
            ]
          }
        ]
      },
      "adaptive": {
        "min_feedback": 5,
        "max_step_pct": 10,
        "interval_mins": 2
      },
      "state_configs": {
        "completed_flow_id": null
      }
    }
  }
}

settings {
  encodeUrl: true
}
