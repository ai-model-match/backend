meta {
  name: Update Config
  type: http
  seq: 2
}

put {
  url: http://127.0.0.1:8001/api/v1/use-cases/{{firstUseCaseId}}/rollout-strategy
  body: json
  auth: bearer
}

auth:bearer {
  token: {{accessToken}}
}

body:json {
  {
    "configuration": {
      "warmup": {
        "interval_mins": null,
        "interval_sess_req": 10,
        "goals": [
          {
            "flow_id": "5008b7df-968f-4dfd-992f-588da7e57362",
            "final_serve_pct": 60
          },
          {
            "flow_id": "53a45272-7728-4297-a941-a3f0795f6b94",
            "final_serve_pct": 40
          }
        ]
      },
      "escape": {
        "rules": [
          {
            "flow_id": "53a45272-7728-4297-a941-a3f0795f6b94",
            "min_feedback": 5,
            "lower_score": 2,
            "rollback": [
              {
                "flow_id": "5008b7df-968f-4dfd-992f-588da7e57362",
                "final_serve_pct": 100
              },
              {
                "flow_id": "53a45272-7728-4297-a941-a3f0795f6b94",
                "final_serve_pct": 0
              }
            ]
          }
        ]
      },
      "adaptive": {
        "min_feedback": 20,
        "max_step_pct": 10,
        "interval_mins": 10
      }
    }
  }
}

settings {
  encodeUrl: true
}
